(()=>{"use strict";let t=()=>{const t=document.querySelector(".weather--app"),e=document.createElement("div");t.appendChild(e),e.setAttribute("class","containerPictures");const a=document.createElement("img");e.appendChild(a),a.src=`https://source.unsplash.com/random/?${city.value}`,a.alt="city_illustration"};const e=document.querySelector(".submit"),a=document.querySelector(".clear"),n=document.querySelector("#city"),o=document.querySelector(".weather--app"),r=async t=>{try{let e=await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${t}&units=metric&appid=25a1023256bf6e806f82892c9dd8fe40`);await e.json().then((t=>{const e=document.createElement("article");o.appendChild(e),e.setAttribute("class","day_one");const a=document.createElement("div");e.appendChild(a),a.setAttribute("class","city_data");const n=document.createElement("h2");n.textContent=t.city.name+", "+t.city.country,a.appendChild(n);const r=document.createElement("p");r.setAttribute("class","date");const c=t.list[0].dt,i=new Date(1e3*c);r.textContent=i.toDateString(),a.appendChild(r);const l=document.createElement("div");l.setAttribute("class","temp_data"),e.appendChild(l);const s=document.createElement("img");l.appendChild(s);const d=`http://openweathermap.org/img/wn/${t.list[0].weather[0].icon}.png`;s.src=d,s.alt="icon";const p=document.createElement("p");p.setAttribute("class","description"),p.textContent=t.list[0].weather[0].description,l.appendChild(p);const m=document.createElement("p");m.setAttribute("class","temp"),m.textContent=Math.floor(t.list[0].main.temp)+"°C",l.appendChild(m);const h=document.createElement("div");h.setAttribute("class","weather_data"),e.appendChild(h);const u=document.createElement("p");u.setAttribute("class","weather"),u.textContent="Feels like "+Math.floor(t.list[0].main.feels_like)+"°C",h.appendChild(u);const C=document.createElement("p");C.textContent="Min: "+Math.floor(t.list[0].main.temp_min)+"°C",h.appendChild(C);const g=document.createElement("p");g.textContent="Max: "+Math.floor(t.list[0].main.temp_max)+"°C",h.appendChild(g);const y=document.createElement("p");y.textContent="Humidity: "+t.list[0].main.humidity+"%",h.appendChild(y);const w=document.createElement("p"),b=t.list[0].wind.speed,f=Math.floor(3.6*b);w.textContent="wind speed: "+f+" km/h",h.appendChild(w),window.localStorage.LastCityAsk=n.textContent}))}catch(t){alert("There is an error somewhere!")}},c=async t=>{try{let e=await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${t}&units=metric&appid=25a1023256bf6e806f82892c9dd8fe40`);await e.json().then((t=>{const e=document.createElement("article");o.appendChild(e),e.setAttribute("class","container_fallowing_days");let a=a=>{const n=document.createElement("div");e.appendChild(n),n.setAttribute("class","fallowing_days");const o=document.createElement("p");n.appendChild(o);const r=t.list[a].dt,c=new Date(1e3*r);o.textContent=c.toDateString();const i=document.createElement("img");n.appendChild(i);const l=`http://openweathermap.org/img/wn/${t.list[a].weather[0].icon}.png`;i.src=l,i.alt="icon";const s=document.createElement("p");n.appendChild(s),s.textContent=t.list[a].weather[0].description;const d=document.createElement("p");n.appendChild(d),d.textContent=Math.floor(t.list[a].main.temp)+"°C"};a(7),a(15),a(23),a(31)}))}catch(t){alert("There is an error somewhere!")}},i=async t=>{try{let e=await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${t}&units=metric&appid=25a1023256bf6e806f82892c9dd8fe40`);await e.json().then((t=>{let e=e=>{const a=t.list[0].dt;return new Date(1e3*a).toDateString()},a=Chart.getChart("myChart");null!=a&&a.destroy();const n=document.getElementById("myChart").getContext("2d");new Chart(n,{type:"line",data:{labels:[e(),e(),e(),e(),e()],datasets:[{label:"Graph for the fallowing days for "+t.city.name+", "+t.city.country,data:[Math.floor(t.list[0].main.temp),Math.floor(t.list[7].main.temp),Math.floor(t.list[15].main.temp),Math.floor(t.list[23].main.temp),Math.floor(t.list[31].main.temp)],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{}})}))}catch(t){alert("There is an error somewhere!")}},l=localStorage.getItem("LastCityAsk");e.addEventListener("click",(()=>{t(),r(n.value),c(n.value),i(n.value),n.value=""})),document.addEventListener("keypress",(e=>{"Enter"===e.key&&(t(),r(n.value),c(n.value),i(n.value),n.value="")})),a.addEventListener("click",(()=>{location.reload()})),window.addEventListener("load",(()=>{l?((()=>{const t=document.querySelector(".weather--app"),e=document.createElement("div");t.appendChild(e),e.setAttribute("class","containerPictures");const a=document.createElement("img");e.appendChild(a),a.src=`https://source.unsplash.com/random/?${localStorage.LastCityAsk}`,a.alt="city_illustration"})(localStorage.LastCityAsk),r(localStorage.LastCityAsk),c(localStorage.LastCityAsk),i(localStorage.LastCityAsk)):(t(),r("san juan, PR"),c("san juan, PR"),i("san juan, PR"))}))})();